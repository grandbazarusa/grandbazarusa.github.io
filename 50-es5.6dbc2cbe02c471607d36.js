function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{F4UR:function(e,t,n){"use strict";n.r(t),n.d(t,"LoginModule",(function(){return R}));var o=n("ofXK"),r=n("3Pt+"),i=n("tyNb"),c=n("TEn/"),a=n("mrSG"),s=n("pwB6"),l=n("DVUX"),u=n("Oipj"),h=n("iqUP"),d=n("ar4q"),f=n("fXoL"),g=n("gren"),p=n("Wp6s"),m=n("kmnG"),b=n("B9HH"),v=n("qFsG"),w=n("sYmb");function y(e,t){1&e&&(f.hc(0,"mat-error"),f.Xc(1,"Required Field"),f.gc())}function O(e,t){1&e&&(f.hc(0,"mat-error"),f.Xc(1,"Invalid Mobile Number "),f.gc())}function P(e,t){if(1&e){var n=f.ic();f.hc(0,"ion-button",17),f.pc("click",(function(){f.Nc(n);var e=f.tc(3);return e.askValidatePhone(e.phoneForm.controls.phone)})),f.Xc(1),f.uc(2,"translate"),f.gc()}if(2&e){f.tc();var o=f.Kc(1);f.Cc("disabled",!o.form.valid||(null==o.form.controls.phone||null==o.form.controls.phone.errors?null:o.form.controls.phone.errors.validatePhoneNumber)),f.Ob(1),f.Zc(" ",f.vc(2,2,"Request OTP")," ")}}var k=function(){return["in"]};function C(e,t){if(1&e&&(f.hc(0,"form",10,11),f.hc(2,"mat-form-field",12),f.cc(3,"ngx-mat-intl-tel-input",13,14),f.uc(5,"translate"),f.hc(6,"mat-hint"),f.Xc(7),f.gc(),f.Vc(8,y,2,0,"mat-error",2),f.Vc(9,O,2,0,"mat-error",2),f.gc(),f.hc(10,"div",15),f.Vc(11,P,3,4,"ion-button",16),f.gc(),f.gc()),2&e){var n=f.Kc(1),o=f.Kc(4),r=f.tc(2);f.Cc("formGroup",r.phoneForm),f.Ob(3),f.Dc("placeholder",f.vc(5,10,"Enter Mobile Number")),f.Cc("cssClass","custom")("preferredCountries",f.Fc(12,k))("enablePlaceholder",!0)("enableSearch",!0),f.Ob(4),f.Zc("e.g. ",o.selectedCountry.placeHolder,""),f.Ob(1),f.Cc("ngIf",null==n.form.controls.phone||null==n.form.controls.phone.errors?null:n.form.controls.phone.errors.required),f.Ob(1),f.Cc("ngIf",n.submitted&&(null==n.form.controls.phone||null==n.form.controls.phone.errors?null:n.form.controls.phone.errors.validatePhoneNumber)),f.Ob(2),f.Cc("ngIf",!r.goingon)}}function x(e,t){if(1&e){var n=f.ic();f.hc(0,"ion-button",23),f.pc("click",(function(){return f.Nc(n),f.tc(3).reAuthenticateOtp()})),f.Xc(1),f.uc(2,"translate"),f.gc()}2&e&&(f.Ob(1),f.Zc(" ",f.vc(2,1,"Or Ask OTP Again")," "))}function M(e,t){if(1&e){var n=f.ic();f.hc(0,"div"),f.hc(1,"mat-form-field",18),f.hc(2,"mat-label"),f.Xc(3),f.uc(4,"translate"),f.gc(),f.hc(5,"input",19,20),f.pc("ngModelChange",(function(e){return f.Nc(n),f.tc(2).verificationcode=e})),f.gc(),f.gc(),f.hc(7,"ion-button",21),f.pc("click",(function(){return f.Nc(n),f.tc(2).verifySMS()})),f.Xc(8),f.uc(9,"translate"),f.gc(),f.Vc(10,x,3,3,"ion-button",22),f.gc()}if(2&e){var o=f.tc(2);f.Ob(3),f.Yc(f.vc(4,4,"Enter OTP")),f.Ob(2),f.Cc("ngModel",o.verificationcode),f.Ob(3),f.Zc(" ",f.vc(9,6,"Verify OTP")," "),f.Ob(2),f.Cc("ngIf",o.redootp)}}function T(e,t){if(1&e&&(f.hc(0,"mat-card"),f.hc(1,"mat-card-header"),f.hc(2,"mat-card-title"),f.Xc(3),f.uc(4,"translate"),f.gc(),f.gc(),f.hc(5,"mat-card-content",3),f.hc(6,"div"),f.Vc(7,C,12,13,"form",7),f.gc(),f.Vc(8,M,11,8,"div",2),f.gc(),f.hc(9,"div",8),f.cc(10,"div",9),f.gc(),f.gc()),2&e){var n=f.tc();f.Ob(3),f.Zc(" ",f.vc(4,3,"Login using phone"),""),f.Ob(4),f.Cc("ngIf",!n.windowref.confirmationResult),f.Ob(1),f.Cc("ngIf",n.windowref.confirmationResult)}}var _,S,I=((_=function(){function e(t,n,o,i,c,a,s,l,u,h,d,f,g){_classCallCheck(this,e),this.events=t,this.ngxUiLoaderService=n,this.fireauth=o,this.toastCtrl=i,this.ygen=c,this.alertme=a,this.yovalservice=s,this.yobuilderservice=l,this.ynotification=u,this.toasterService=h,this.yauth=d,this.ystorageservice=f,this.router=g,this.whatcontrolsmap=new Map,this.mybuttons=new Map,this.loadingindicator=!1,this.retry=!1,this.gototp=!1,this.redootp=!1,this.goingon=!1,this.phoneForm=new r.g({phone:new r.d(void 0,[r.v.required])}),this.askforotp=!1,this.OTP="",this.showOTPInput=!0,this.OTPmessage="An OTP is sent to your number. You should receive it in 15 s",this.startObject(),this.addressForm=new r.g({mobile:new r.d("",[r.v.required,r.v.minLength(2),r.v.maxLength(30),function(e){if(e.value){var t=/^\+?\d[\d -]{8,12}\d$/;if(console.log(t.test(e.value)),!t.test(e.value))return{"Invalid Phone":{value:e.value}};var n=L.parse(e.value,"IN");if(!L.isValidNumber(n))return{"Invalid Phone":{value:e.value}}}return null}])})}return _createClass(e,[{key:"ngOnInit",value:function(){this.windowref=this.ygen.nativeWindow}},{key:"askValidatePhone",value:function(e){var t=this;this.ngxUiLoaderService.start(),setTimeout((function(){t.ngxUiLoaderService.stop(),t.goingon=!1}),4e4),this.goingon=!0;var n=this;this.windowref.RecaptchaVerifier&&(this.windowref.RecaptchaVerifier.clear(),document.getElementById("recaptcha-container")?(document.getElementById("captchwrapper").innerHTML="",document.getElementById("captchwrapper").innerHTML='<div id="recaptcha-container"></div>'):document.getElementById("captchwrapper").innerHTML='<div id="recaptcha-container"></div>'),this.windowref.RecaptchaVerifier=new h.auth.RecaptchaVerifier("recaptcha-container",{size:"invisible",callback:function(t){n.askforotp=!0,n.validatePhone(e)},"expired-callback":function(){n.toasterService.pop("warn","Capcha Expired, Please validate captcha ","Captcha expired."),n.windowref.confirmationResult=null,n.ngxUiLoaderService.stop()}}),this.windowref.RecaptchaVerifier.render(),this.windowref.RecaptchaVerifier.verify()}},{key:"validatePhone",value:function(e){this.gototp=!1;var t=this.ygen.phoneNumberUtil.parse(e.value,"IN");if(this.ygen.isavalidphone(t)){var n=this.ygen.phoneE164(t);this.appVerifier=this.windowref.RecaptchaVerifier;var o=this;this.yauth.loginPhone({phonenumber:n,appverifier:this.appVerifier}).then((function(e){o.windowref.confirmationResult=e,o.gototp=!0,o.goingon=!1,o.ngxUiLoaderService.stop(),o.toasterService.pop("success","OTP sent to you mobile number "+n,"OTP Success"),setTimeout((function(){o.redootp=!0,o.ngxUiLoaderService.stop()}),25e3)})).catch((function(e){o.ngxUiLoaderService.stop(),o.goingon=!1,o.toasterService.pop("error","Error OTP SMS not send","OTP Failure"),o.alertme.openSnackBar(e.message,"Ok"),console.log(e),o.windowref.confirmationResult=null}))}else this.toasterService.pop("error","Not a valid mobile number, please correct","Validation Failure"),this.windowref.confirmationResult=null,this.goingon=!1,this.ngxUiLoaderService.stop()}},{key:"verifySMS",value:function(){var e=this,t=this;this.ngxUiLoaderService.start(),this.windowref.confirmationResult.confirm(this.verificationcode).then((function(t){console.log("yeah ",t),e.windowref.confirmationResult=null,e.goingon=!1,e.ngxUiLoaderService.stop(),e.events.publish("user:signup",!0)})).catch((function(n){e.toasterService.pop("error",n.message,"Validation Failure"),t.redootp=!0,e.goingon=!1,e.ngxUiLoaderService.stop(),console.log(n,"Incorrect code entered??")}))}},{key:"reAuthenticateOtp",value:function(){this.windowref.confirmationResult=null,this.gototp=!1,this.ngxUiLoaderService.stop(),this.redootp=!1}},{key:"startObject",value:function(){var e=new Map;e.set("userid",this.yobuilderservice.createType("userid","Enter User Name",!0,!0,!0,"email",1,"","Your email address")),e.set("password",this.yobuilderservice.createType("password","Enter Password",!0,!0,!0,"password",2,"")),e.set("rememberuser",this.yobuilderservice.createType("rememberuser","Remember Login",!0,!0,!0,"checkbox",2,!0)),e.set("agreement",this.yobuilderservice.createType("agreement","Agreed to Terms & Condtions",!0,!0,!0,"checkbox",2,!0)),this.inwhatformgroup=this.yobuilderservice.createFormGroup(e),this.whatcontrolsmap=this.yobuilderservice.createMap(e,this.inwhatformgroup);var t=new s.A("Sign In","unlock","lock_open","primary",!1);this.mybuttons.set("Action",t)}},{key:"send",value:function(e){this.login(e.data.value)}},{key:"cancel",value:function(e){this.startObject()}},{key:"registerToken",value:function(e){this.ynotification.registertoken()}},{key:"login",value:function(e){var t=this;this.yauth.login(e).subscribe((function(e){e.subscribe((function(e){e.isError?t.alertme.errordata(e.message):t.yauth.isAuthenticated().subscribe((function(e){t.ystorageservice.isTenantSelection()&&t.router.navigateByUrl("/tenants")}))}))}))}},{key:"presentToast",value:function(e,t,n,o){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.toastCtrl.create({message:e,position:n,duration:o});case 2:t.sent.present();case 3:case"end":return t.stop()}}),t,this)})))}},{key:"next",value:function(){this.showOTPInput=!0,this.start()}},{key:"start",value:function(){}},{key:"stop",value:function(){}},{key:"processSMS",value:function(e){var t=e.body;t&&-1!=t.indexOf("enappd_starters")&&(this.OTP=e.body.slice(0,6),console.log(this.OTP),this.OTPmessage="OTP received. Proceed to register",this.stop())}},{key:"register",value:function(){""!=this.OTP?this.presentToast("You are successfully registered",!1,"top",1500):this.presentToast("Your OTP is not valid",!1,"bottom",1500)}}]),e}()).\u0275fac=function(e){return new(e||_)(f.bc(s.ab),f.bc(g.c),f.bc(u.AngularFireAuth),f.bc(c.tb),f.bc(s.V),f.bc(s.a),f.bc(s.fb),f.bc(s.U),f.bc(s.W),f.bc(l.d),f.bc(s.O),f.bc(s.eb),f.bc(i.j))},_.\u0275cmp=f.Vb({type:_,selectors:[["app-login"]],decls:31,vars:18,consts:[[3,"color"],["slot","start"],[4,"ngIf"],[1,"box"],[3,"captchaOn","whatform","whatformgroup","whichbuttons","actionEvent","cancelEvent"],["color","secondary","routerLink","/forgotpass"],["color","secondary","routerLink","/register"],[3,"formGroup",4,"ngIf"],["id","captchwrapper"],["id","recaptcha-container"],[3,"formGroup"],["f","ngForm"],[2,"width","80vw"],["name","phone","formControlName","phone",3,"cssClass","preferredCountries","enablePlaceholder","placeholder","enableSearch"],["phone",""],[2,"display","flex","justify-content","center"],["color","danger","size","small","class","delete",3,"disabled","click",4,"ngIf"],["color","danger","size","small",1,"delete",3,"disabled","click"],[1,"animated","tada"],["type","text","matInput","",3,"ngModel","ngModelChange"],["verificationcaode",""],["color","danger","size","small",1,"delete",3,"click"],["color","secondary","size","small",3,"click",4,"ngIf"],["color","secondary","size","small",3,"click"]],template:function(e,t){1&e&&(f.hc(0,"ion-header"),f.hc(1,"ion-toolbar",0),f.hc(2,"ion-buttons",1),f.cc(3,"ion-menu-button"),f.gc(),f.hc(4,"ion-title"),f.Xc(5),f.uc(6,"translate"),f.gc(),f.gc(),f.gc(),f.hc(7,"ion-content"),f.hc(8,"ion-grid"),f.cc(9,"ion-col"),f.gc(),f.hc(10,"ion-grid"),f.hc(11,"ion-row"),f.hc(12,"ion-col"),f.Vc(13,T,11,5,"mat-card",2),f.gc(),f.gc(),f.hc(14,"ion-row"),f.hc(15,"ion-col"),f.hc(16,"mat-card"),f.hc(17,"mat-card-header"),f.hc(18,"mat-card-title"),f.Xc(19),f.uc(20,"translate"),f.gc(),f.gc(),f.hc(21,"mat-card-content",3),f.hc(22,"yogagainv2-dyanamic-page",4),f.pc("actionEvent",(function(e){return t.send(e)}))("cancelEvent",(function(e){return t.cancel(e)})),f.gc(),f.gc(),f.gc(),f.gc(),f.gc(),f.hc(23,"ion-row"),f.hc(24,"ion-col"),f.hc(25,"ion-button",5),f.Xc(26),f.uc(27,"translate"),f.gc(),f.hc(28,"ion-button",6),f.Xc(29),f.uc(30,"translate"),f.gc(),f.gc(),f.gc(),f.gc(),f.gc()),2&e&&(f.Ob(1),f.Cc("color",(t.ygen.isTenantSelection(),"secondary")),f.Ob(4),f.Yc(f.vc(6,10,"Login")),f.Ob(8),f.Cc("ngIf",t.ygen.inTenant()||!0),f.Ob(6),f.Zc(" ",f.vc(20,12,"OR Login via Email")," "),f.Ob(3),f.Cc("captchaOn",!1)("whatform",t.whatcontrolsmap)("whatformgroup",t.inwhatformgroup)("whichbuttons",t.mybuttons),f.Ob(4),f.Zc(" ",f.vc(27,14,"Forgot Password")," "),f.Ob(3),f.Zc(" ",f.vc(30,16,"Signup")," "))},directives:[c.y,c.fb,c.j,c.L,c.db,c.s,c.x,c.r,c.P,o.m,p.a,p.f,p.h,p.d,s.q,c.i,c.qb,i.l,r.w,r.p,r.h,m.c,b.a,r.o,r.f,m.f,m.b,m.g,v.b,r.b,r.r],pipes:[w.c],styles:['.main[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column;justify-content:center}@media screen and (min-width:767px){ion-card[_ngcontent-%COMP%]{width:600px;margin:auto}}ion-card[_ngcontent-%COMP%]{--background:#fff;box-shadow:none;-webkit-box-shadow:none;overflow:scroll}.input[_ngcontent-%COMP%]{background-color:#f0f0f0;border:1px solid #d2d2d2;border-radius:9px;font-size:.9em!important}.otpinput[_ngcontent-%COMP%]{letter-spacing:30px;-webkit-padding-end:0;--padding-end:0;font-size:30px;border:none;background:#fff}.white[_ngcontent-%COMP%]{color:#fff}.OTP-border[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border-bottom:1px solid}.small[_ngcontent-%COMP%]{font-size:13px}.small[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:unset!important}.button-color[_ngcontent-%COMP%]{background-color:var(--ion-color-mytheme)}.logo[_ngcontent-%COMP%]{width:1.25em!important}.grid[_ngcontent-%COMP%]{height:100vh;flex-direction:column}.grid[_ngcontent-%COMP%], .row[_ngcontent-%COMP%]{display:flex;justify-content:center}.row[_ngcontent-%COMP%]{flex-direction:row}.img-logo[_ngcontent-%COMP%]{height:120px;width:120px}.fire-logo[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding-bottom:30px}.bold[_ngcontent-%COMP%]{font-weight:700}.block[_ngcontent-%COMP%]{display:block}.transition[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f57c00 14%,#ffca00 96%)}.btn-color[_ngcontent-%COMP%]{color:#ffa000}.error[_ngcontent-%COMP%]{color:red;text-align:center;display:block;font-weight:700}@-webkit-keyframes spinner{to{transform:rotate(1turn)}}@keyframes spinner{to{transform:rotate(1turn)}}.spinner[_ngcontent-%COMP%]:before{content:" OTP";box-sizing:border-box;position:absolute;top:50%;left:50%;width:20px;height:20px;margin-top:-10px;margin-left:-10px;border-radius:50%;border:2px solid #fff;border-top-color:#000;-webkit-animation:spinner .8s linear infinite;animation:spinner .8s linear infinite}']}),_),L=d.PhoneNumberUtil.getInstance(),V=[{path:"",component:I}],R=((S=function e(){_classCallCheck(this,e)}).\u0275mod=f.Zb({type:S}),S.\u0275inj=f.Yb({factory:function(e){return new(e||S)},imports:[[o.c,r.i,c.gb,r.t,s.J,s.b,s.o,r.t,i.n.forChild(V)]]}),S)}}]);