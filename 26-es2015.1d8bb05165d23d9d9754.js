(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{upr6:function(t,e,c){"use strict";c.r(e),c.d(e,"CheckoutdetailPageModule",(function(){return gt}));var n=c("ofXK"),r=c("3Pt+"),i=c("tyNb"),o=c("TEn/"),a=c("mrSG"),s=c("2Vo4"),g=c("z6cu"),l=c("IzEk"),d=c("7o/Q");class u{constructor(t,e){this.count=t,this.source=e}call(t,e){return e.subscribe(new h(t,this.count,this.source))}}class h extends d.a{constructor(t,e,c){super(t),this.count=e,this.source=c}error(t){if(!this.isStopped){const{source:e,count:c}=this;if(0===c)return super.error(t);c>-1&&(this.count=c-1),e.subscribe(this._unsubscribeAndRecycle())}}}var p=c("JIr8"),y=c("tk/3"),m=c("pwB6"),b=c("fXoL"),f=c("gren"),v=c("0IaG"),O=c("xHqg"),C=c("bTqV"),S=c("QibW"),x=c("kmnG"),I=c("qFsG"),k=c("B9HH"),w=c("6xI8"),N=c("sYmb");const X=["paypalcontainer"];function P(t,e){if(1&t&&(b.hc(0,"div",24),b.cc(1,"app-callphone",25),b.gc()),2&t){const t=b.tc(3);b.Ob(1),b.Cc("mobile",t.ygen.getSettings().oncallsupport)}}function V(t,e){if(1&t){const t=b.ic();b.hc(0,"button",26),b.pc("click",(function(){b.Nc(t);const e=b.tc(3);return e.ygen.inviteviawhatsapp(e.ygen.getSettings().oncallwhatsappsupport,"Hi")})),b.cc(1,"ion-icon",27),b.gc()}}function F(t,e){if(1&t&&(b.hc(0,"div",19),b.hc(1,"h3"),b.Xc(2),b.uc(3,"translate"),b.gc(),b.hc(4,"p"),b.Xc(5),b.gc(),b.hc(6,"div",20),b.hc(7,"div",21),b.Vc(8,P,2,1,"div",22),b.Vc(9,V,2,0,"button",23),b.gc(),b.gc(),b.gc()),2&t){const t=b.tc(2);b.Ob(2),b.Yc(b.vc(3,4,"Store's Instructions")),b.Ob(3),b.Yc(t.ygen.getSettings().checkoutordermsg),b.Ob(3),b.Cc("ngIf",t.ygen.getSettings().oncallsupport&&(""+t.ygen.getSettings().oncallsupport).length>1),b.Ob(1),b.Cc("ngIf",t.ygen.getSettings().oncallwhatsappsupport&&(""+t.ygen.getSettings().oncallwhatsappsupport).length>1)}}function T(t,e){if(1&t&&(b.hc(0,"div",28),b.cc(1,"ion-icon",29),b.hc(2,"h3"),b.Xc(3),b.uc(4,"translate"),b.gc(),b.hc(5,"p"),b.Xc(6),b.gc(),b.cc(7,"app-callphone",25),b.hc(8,"ion-button",30),b.Xc(9),b.uc(10,"translate"),b.gc(),b.gc()),2&t){const t=b.tc(2);b.Ob(3),b.Yc(b.vc(4,4,"No more Orders or Shop Subscription Expired")),b.Ob(3),b.Yc(t.ygen.getSettings().stopordersmessage),b.Ob(1),b.Cc("mobile",t.ygen.getSettings().oncallsupport),b.Ob(2),b.Zc("",b.vc(10,6,"Come back again")," ")}}function q(t,e){1&t&&(b.Xc(0),b.uc(1,"translate")),2&t&&b.Yc(b.vc(1,1,"Pick your Delivery option"))}function D(t,e){1&t&&(b.hc(0,"div"),b.hc(1,"h1"),b.Xc(2),b.uc(3,"translate"),b.gc(),b.gc()),2&t&&(b.Ob(2),b.Yc(b.vc(3,1,"No Delivery Options Setup by Store; You can not proceed further")))}function Y(t,e){1&t&&(b.hc(0,"mat-radio-button",33),b.Xc(1),b.uc(2,"translate"),b.gc()),2&t&&(b.Ob(1),b.Zc(" ",b.vc(2,1,"Home Delivery"),""))}function M(t,e){1&t&&(b.hc(0,"mat-radio-button",34),b.Xc(1),b.uc(2,"translate"),b.gc()),2&t&&(b.Ob(1),b.Zc(" ",b.vc(2,1,"Store Pickup"),""))}function L(t,e){if(1&t&&(b.hc(0,"mat-radio-group",13),b.Vc(1,Y,3,3,"mat-radio-button",31),b.Vc(2,M,3,3,"mat-radio-button",32),b.gc()),2&t){const t=b.tc(2);b.Cc("formControl",t.deliveryType),b.Ob(1),b.Cc("ngIf",t.ygen.getSettings().onlyhomepickup),b.Ob(1),b.Cc("ngIf",t.ygen.getSettings().onlystorepickup)}}function A(t,e){1&t&&(b.Xc(0),b.uc(1,"translate")),2&t&&b.Yc(b.vc(1,1,"Pick your Payment option"))}function E(t,e){1&t&&(b.hc(0,"mat-radio-button",35),b.Xc(1),b.uc(2,"translate"),b.gc()),2&t&&(b.Ob(1),b.Zc(" ",b.vc(2,1,"Cash on Delivery"),""))}function j(t,e){1&t&&(b.hc(0,"mat-radio-button",36),b.Xc(1),b.uc(2,"translate"),b.gc()),2&t&&(b.Ob(1),b.Zc(" ",b.vc(2,1,"Pay Now")," "))}function Z(t,e){1&t&&(b.Xc(0),b.uc(1,"translate")),2&t&&b.Yc(b.vc(1,1,"More Details"))}function z(t,e){1&t&&(b.hc(0,"legend"),b.Xc(1),b.uc(2,"translate"),b.gc()),2&t&&(b.Ob(1),b.Yc(b.vc(2,1,"Your Details")))}function H(t,e){1&t&&(b.hc(0,"legend"),b.Xc(1),b.uc(2,"translate"),b.gc()),2&t&&(b.Ob(1),b.Yc(b.vc(2,1,"Delivery Address")))}function _(t,e){if(1&t&&(b.hc(0,"mat-error"),b.Xc(1),b.gc()),2&t){const t=b.tc(3);b.Ob(1),b.Zc(" ",t.getErrorMessage(t.addressForm.controls.userName,"Name"),"")}}function B(t,e){if(1&t&&(b.hc(0,"mat-error"),b.Xc(1),b.gc()),2&t){const t=b.tc(3);b.Ob(1),b.Zc(" ",t.getErrorMessage(t.addressForm.controls.mobile,"mobile"),"")}}function U(t,e){if(1&t&&(b.hc(0,"mat-error"),b.Xc(1),b.gc()),2&t){const t=b.tc(3);b.Ob(1),b.Zc(" ",t.getErrorMessage(t.addressForm.controls.unitName,"Building Name"),"")}}function G(t,e){if(1&t&&(b.hc(0,"mat-error"),b.Xc(1),b.gc()),2&t){const t=b.tc(3);b.Ob(1),b.Zc(" ",t.getErrorMessage(t.addressForm.controls.address,"Address"),"")}}function R(t,e){if(1&t&&(b.hc(0,"mat-error"),b.Xc(1),b.gc()),2&t){const t=b.tc(3);b.Ob(1),b.Zc(" ",t.getErrorMessage(t.addressForm.controls.city,"City"),"")}}function Q(t,e){if(1&t&&(b.hc(0,"mat-error"),b.Xc(1),b.gc()),2&t){const t=b.tc(3);b.Ob(1),b.Zc(" ",t.getErrorMessage(t.addressForm.controls.state,"State"),"")}}function $(t,e){if(1&t&&(b.hc(0,"mat-error"),b.Xc(1),b.gc()),2&t){const t=b.tc(3);b.Ob(1),b.Zc(" ",t.getErrorMessage(t.addressForm.controls.zip,"Postal Code"),"")}}function J(t,e){if(1&t&&(b.hc(0,"mat-error"),b.Xc(1),b.gc()),2&t){const t=b.tc(3);b.Ob(1),b.Zc(" ",t.getErrorMessage(t.addressForm.controls.country,"Country"),"")}}const K=function(){return["in"]};function W(t,e){if(1&t){const t=b.ic();b.hc(0,"div"),b.hc(1,"form",37),b.hc(2,"fieldset"),b.Vc(3,z,3,3,"legend",4),b.Vc(4,H,3,3,"legend",4),b.hc(5,"table",38),b.hc(6,"tr"),b.hc(7,"td"),b.hc(8,"mat-form-field",17),b.hc(9,"mat-label"),b.Xc(10),b.uc(11,"translate"),b.gc(),b.cc(12,"input",39),b.Vc(13,_,2,1,"mat-error",4),b.gc(),b.gc(),b.gc(),b.hc(14,"tr"),b.hc(15,"td"),b.hc(16,"mat-form-field",17),b.cc(17,"ngx-mat-intl-tel-input",40),b.uc(18,"translate"),b.hc(19,"mat-hint"),b.Xc(20),b.uc(21,"translate"),b.gc(),b.Vc(22,B,2,1,"mat-error",4),b.gc(),b.gc(),b.gc(),b.hc(23,"tr"),b.hc(24,"td"),b.hc(25,"mat-form-field",17),b.hc(26,"mat-label"),b.Xc(27),b.uc(28,"translate"),b.gc(),b.cc(29,"input",41),b.Vc(30,U,2,1,"mat-error",4),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(31,"p"),b.hc(32,"mat-form-field",17),b.hc(33,"mat-label"),b.Xc(34),b.uc(35,"translate"),b.gc(),b.hc(36,"textarea",42),b.Xc(37,"\n                  "),b.gc(),b.Vc(38,G,2,1,"mat-error",4),b.gc(),b.gc(),b.hc(39,"table",38),b.hc(40,"tr"),b.hc(41,"td"),b.hc(42,"mat-form-field",17),b.hc(43,"mat-label"),b.Xc(44),b.uc(45,"translate"),b.gc(),b.cc(46,"input",43),b.Vc(47,R,2,1,"mat-error",4),b.gc(),b.gc(),b.hc(48,"td"),b.hc(49,"mat-form-field",17),b.hc(50,"mat-label"),b.Xc(51),b.uc(52,"translate"),b.gc(),b.cc(53,"input",44),b.Vc(54,Q,2,1,"mat-error",4),b.gc(),b.gc(),b.gc(),b.hc(55,"tr"),b.hc(56,"td"),b.hc(57,"mat-form-field",17),b.hc(58,"mat-label"),b.Xc(59),b.uc(60,"translate"),b.gc(),b.cc(61,"input",45,46),b.hc(63,"mat-hint",47),b.Xc(64),b.gc(),b.Vc(65,$,2,1,"mat-error",4),b.gc(),b.gc(),b.gc(),b.hc(66,"tr"),b.hc(67,"td"),b.hc(68,"mat-form-field",48),b.cc(69,"input",49,50),b.gc(),b.hc(71,"mat-select-country",51),b.pc("onCountrySelected",(function(e){b.Nc(t);const c=b.tc(2);return c.onCountrySelected(e,c.addressForm.controls.country)})),b.gc(),b.Vc(72,J,2,1,"mat-error",4),b.gc(),b.gc(),b.gc(),b.gc(),b.gc(),b.gc()}if(2&t){const t=b.Kc(62),e=b.Kc(70),c=b.tc(2);b.Ob(1),b.Cc("formGroup",c.addressForm),b.Ob(2),b.Cc("ngIf",c.isrequiredAddressForm()),b.Ob(1),b.Cc("ngIf",!c.isrequiredAddressForm()),b.Ob(6),b.Yc(b.vc(11,27,"Name")),b.Ob(3),b.Cc("ngIf",c.addressForm.controls.userName.invalid),b.Ob(4),b.Dc("placeholder",b.vc(18,29,"mobile")),b.Cc("cssClass","custom")("preferredCountries",b.Fc(43,K))("enablePlaceholder",!0)("enableSearch",!0)("formControl",c.addressForm.controls.mobile)("required",!0),b.Ob(3),b.Yc(b.vc(21,31,"Your Mobile..")),b.Ob(2),b.Cc("ngIf",c.addressForm.controls.mobile.invalid),b.Ob(5),b.Yc(b.vc(28,33,"Building Name")),b.Ob(3),b.Cc("ngIf",c.addressForm.controls.unitName.invalid),b.Ob(4),b.Yc(b.vc(35,35,"Address")),b.Ob(4),b.Cc("ngIf",c.addressForm.controls.address.invalid),b.Ob(6),b.Yc(b.vc(45,37,"City")),b.Ob(3),b.Cc("ngIf",c.addressForm.controls.city.invalid),b.Ob(4),b.Yc(b.vc(52,39,"State")),b.Ob(3),b.Cc("ngIf",c.addressForm.controls.state.invalid),b.Ob(5),b.Yc(b.vc(60,41,"Postal Code")),b.Ob(5),b.Zc("",t.value.length,"/5"),b.Ob(1),b.Cc("ngIf",c.addressForm.controls.zip.invalid),b.Ob(6),b.Cc("country",e.value),b.Ob(1),b.Cc("ngIf",c.addressForm.controls.country.invalid)}}function tt(t,e){1&t&&(b.hc(0,"div",28),b.cc(1,"ion-icon",29),b.hc(2,"h3"),b.Xc(3),b.uc(4,"translate"),b.gc(),b.hc(5,"p"),b.Xc(6),b.uc(7,"translate"),b.gc(),b.hc(8,"ion-button",30),b.Xc(9),b.uc(10,"translate"),b.gc(),b.gc()),2&t&&(b.Ob(3),b.Yc(b.vc(4,3,"Your Cart is Empty")),b.Ob(3),b.Yc(b.vc(7,5,"Lets get you started")),b.Ob(3),b.Zc("",b.vc(10,7,"Start shopping")," "))}function et(t,e){if(1&t&&(b.hc(0,"ion-content",5),b.Vc(1,F,10,6,"div",6),b.Vc(2,T,11,8,"div",7),b.hc(3,"mat-vertical-stepper",8,9),b.hc(5,"mat-step"),b.Vc(6,q,2,3,"ng-template",10),b.hc(7,"div"),b.hc(8,"div"),b.hc(9,"div"),b.Vc(10,D,4,3,"div",4),b.Vc(11,L,3,3,"mat-radio-group",11),b.gc(),b.gc(),b.gc(),b.hc(12,"div"),b.hc(13,"button",12),b.Xc(14),b.uc(15,"translate"),b.gc(),b.gc(),b.gc(),b.hc(16,"mat-step"),b.Vc(17,A,2,3,"ng-template",10),b.hc(18,"div"),b.hc(19,"div"),b.hc(20,"div"),b.hc(21,"mat-radio-group",13),b.Vc(22,E,3,3,"mat-radio-button",14),b.Vc(23,j,3,3,"mat-radio-button",15),b.gc(),b.gc(),b.gc(),b.gc(),b.hc(24,"div"),b.hc(25,"button",12),b.Xc(26),b.uc(27,"translate"),b.gc(),b.gc(),b.gc(),b.hc(28,"mat-step"),b.Vc(29,Z,2,3,"ng-template",10),b.hc(30,"div"),b.hc(31,"form",16),b.hc(32,"fieldset"),b.hc(33,"legend"),b.Xc(34),b.uc(35,"translate"),b.gc(),b.hc(36,"mat-form-field",17),b.hc(37,"mat-label"),b.Xc(38),b.uc(39,"translate"),b.gc(),b.cc(40,"textarea",18),b.gc(),b.gc(),b.gc(),b.Vc(41,W,73,44,"div",4),b.gc(),b.gc(),b.gc(),b.Vc(42,tt,11,9,"div",7),b.gc()),2&t){const t=b.tc();b.Ob(1),b.Cc("ngIf",t.ygen.getSettings().checkoutordermsg&&t.ygen.getSettings().checkoutordermsg.length>0),b.Ob(1),b.Cc("ngIf",t.ygen.getSettings().stoporders||!t.ygen.isActiveSubscription()),b.Ob(1),b.Cc("linear",!1),b.Ob(7),b.Cc("ngIf",!(t.ygen.getSettings().onlystorepickup||t.ygen.getSettings().onlyhomepickup)),b.Ob(1),b.Cc("ngIf",t.ygen.getSettings().onlystorepickup||t.ygen.getSettings().onlyhomepickup),b.Ob(3),b.Yc(b.vc(15,15,"Next")),b.Ob(7),b.Cc("formControl",t.paymentType),b.Ob(1),b.Cc("ngIf",t.ygen.getSettings().offercod),b.Ob(1),b.Cc("ngIf",t.ygen.getSettings().onlinepay),b.Ob(3),b.Yc(b.vc(27,17,"Next")),b.Ob(8),b.Yc(b.vc(35,19,"Delivery Note-Instruction")),b.Ob(4),b.Yc(b.vc(39,21,"Leave a note-instruction about order")),b.Ob(2),b.Cc("formControl",t.deliveryNote),b.Ob(1),b.Cc("ngIf","HD"==t.deliveryType.value||t.isrequiredAddressForm()),b.Ob(1),b.Cc("ngIf",0==t.ycat.getcartcount())}}function ct(t,e){if(1&t&&(b.hc(0,"ion-toolbar"),b.hc(1,"div",54),b.hc(2,"ion-text"),b.hc(3,"h3"),b.Xc(4),b.uc(5,"translate"),b.gc(),b.gc(),b.hc(6,"ion-text"),b.hc(7,"h3"),b.Xc(8),b.gc(),b.gc(),b.gc(),b.gc()),2&t){const t=b.tc(2);b.Ob(4),b.Yc(b.vc(5,3,"Delivery Charges")),b.Ob(4),b.ad(" ",t.ygen.getcurrencysymbol()," ",t.ygen.getSettings().deliverycharges," ")}}function nt(t,e){if(1&t){const t=b.ic();b.hc(0,"ion-button",58),b.pc("click",(function(){b.Nc(t);const e=b.tc(3);return e.payoptions(e.ycat.getcart())})),b.Xc(1),b.uc(2,"translate"),b.gc()}if(2&t){const t=b.tc(3);b.Cc("disabled",t.isReady()),b.Ob(1),b.Zc(" ",b.vc(2,2,"Complete Order"),"")}}function rt(t,e){1&t&&(b.hc(0,"ion-button",59),b.Xc(1),b.uc(2,"translate"),b.gc()),2&t&&(b.Ob(1),b.Zc(" ",b.vc(2,1,"No More Orders"),""))}function it(t,e){if(1&t&&(b.hc(0,"ion-toolbar",0),b.hc(1,"div",55),b.hc(2,"ion-text"),b.hc(3,"h3"),b.Xc(4),b.uc(5,"translate"),b.gc(),b.gc(),b.Vc(6,nt,3,4,"ion-button",56),b.Vc(7,rt,3,3,"ion-button",57),b.hc(8,"ion-text"),b.hc(9,"h3"),b.Xc(10),b.gc(),b.gc(),b.gc(),b.gc()),2&t){const t=b.tc(2);b.Cc("color","warning"),b.Ob(4),b.Yc(b.vc(5,6,"Total")),b.Ob(2),b.Cc("ngIf",!t.ygen.getSettings().stoporders&&t.ygen.isActiveSubscription()&&!t.ispaypal),b.Ob(1),b.Cc("ngIf",t.ygen.getSettings().stoporders&&!t.ygen.isActiveSubscription()),b.Ob(3),b.ad(" ",t.ygen.getcurrencysymbol()," ",t.getTotal()," ")}}function ot(t,e){1&t&&b.cc(0,"div",60,61)}function at(t,e){if(1&t&&(b.hc(0,"ion-footer"),b.Vc(1,ct,9,5,"ion-toolbar",4),b.Vc(2,it,11,8,"ion-toolbar",52),b.Vc(3,ot,2,0,"div",53),b.gc()),2&t){const t=b.tc();b.Ob(1),b.Cc("ngIf","HD"==t.deliveryType.value&&!t.ygen.getSettings().freedelivery&&t.ygen.getSettings().freedeliveryoveramount&&t.ygen.getSettings().freedeliveryamount>t.ycat.getTotal()||!t.ygen.getSettings().freedeliveryoveramount&&!t.ygen.getSettings().freedelivery),b.Ob(1),b.Cc("ngIf",t.ycat.getcartcount()>0),b.Ob(1),b.Cc("ngIf",t.ycat.getcartcount()>0&&t.ispaypal)}}const st=[{path:"",component:(()=>{class t{constructor(t,e,c,n,r,i,o,a,g,l,d,u,h,p,y,b,f){this.centerdb=t,this.http=e,this.ngxUiLoaderService=c,this.ynotification=n,this.yovalidation=r,this.yauth=i,this.ydata=o,this.router=a,this.ygen=g,this.events=l,this.ycat=d,this.alertme=u,this.spaypal=h,this.ystripe=p,this.ypaytm=y,this.ypay=b,this.dialog=f,this.serverpath=m.s.herobackendserver,this.ispaypal=!1,this.gotappsettings=new s.a(!1),this.ispaypal=this.ygen.getSettings().paypal}buildForm(t){let e=t.country?t.country:"India",c=t.mobile?t.mobile:this.yauth.myprofile.mobile;this.addressForm=new r.g({userName:new r.d(t.userName,[r.v.required,r.v.minLength(2),r.v.maxLength(30)]),mobile:new r.d(c,[r.v.required,r.v.minLength(2),r.v.maxLength(30)]),unitName:new r.d(t.unitName,[r.v.required,r.v.minLength(2),r.v.maxLength(30)]),address:new r.d(t.address,[r.v.required,r.v.minLength(2),r.v.maxLength(100)]),city:new r.d(t.city,[r.v.required,r.v.minLength(2),r.v.maxLength(30)]),state:new r.d(t.state,[r.v.required,r.v.minLength(2),r.v.maxLength(30)]),zip:new r.d(t.zip,{validators:[r.v.required,r.v.minLength(2),r.v.maxLength(30)],asyncValidators:[Object(m.gb)(this.ygen)],updateOn:"blur"}),country:new r.d(e,{validators:[r.v.required,r.v.minLength(2),r.v.maxLength(30)]})});let n="HD";this.ygen.getSettings().onlystorepickup&&(n="SP"),this.ygen.getSettings().onlystorepickup||this.ygen.getSettings().onlyhomepickup||(n=""),this.deliveryType=new r.d(n,[r.v.required,r.v.max(2)]),setTimeout(()=>{this.paymentType.setValue(n)},100);let i="COD";this.ygen.getSettings().onlinepay&&(i="PNO"),this.ygen.getSettings().onlinepay||this.ygen.getSettings().offercod||(i=""),this.paymentType=new r.d(i,[r.v.required,r.v.max(3)]),setTimeout(()=>{this.paymentType.setValue(i)},100),this.deliveryNote=new r.d("Thanks",[r.v.required,r.v.max(100)]),this.addressForm.controls.mobile.setValue(c),this.addressForm.controls.country.setValue(e),this.ispaypal&&setTimeout(()=>{this.payoptions(this.ycat.getcart())},100)}isrequiredAddressForm(){return!(!this.payer||this.payer.userName&&this.payer.mobile)}ngOnInit(){this.ydata.retrivedata(m.P.getpath()+"/settings",null).subscribe(t=>{this.yauth.setappSettings(t),this.gotappsettings.next(!0)}),this.ynotification.getStoreAdmins(),this.ygen.getUid()?this.getUserProfile().then(t=>{this.ngxUiLoaderService.stop(),this.payer=t,this.payer?this.buildForm(this.payer):(console.error("blank form"),this.buildForm({}))}).finally(()=>{this.ngxUiLoaderService.stop()}):(this.yauth.setlanding("/checkoutdetail"),this.router.navigate(["/login"],{}))}getUserProfile(){return Object(a.a)(this,void 0,void 0,(function*(){this.ngxUiLoaderService.start();const t=yield this.ydata.getDatabase().object("/profiles/"+this.yauth.getCurrentUserId()).valueChanges().pipe(Object(l.a)(1)).toPromise();return yield t}))}addtocart(t,e,c){c&&(e.orderqty=0);let n=e.orderqty?e.orderqty+t:1;n>e.maxqty?this.alertme.openSnackBar(`Maximum quantiy you can order is ${e.maxqty}`,"Ok"):(Object.assign(e,{orderqty:n}),this.ycat.iscartItem(e)?this.ycat.updatequantity(e):1==n&&(this.alertme.openSnackBar(`Your shopping cart updated with ${e.orderqty} quantity`,"Ok"),this.ycat.addtocart(e))),0==e.orderqty&&this.ycat.delete(e)}pay(t){let e=""+ +new Date,c=this.ygen.randomletter()+this.ygen.randomletter()+~~(1e3*Math.random())+e.substring(e.length-4);t.forEach(t=>{t.$key?t.originalkey=t.$key:console.warn("no Key.."),delete t.$key});let n={trancurrency:this.ygen.getTranCurrency().toLowerCase(),sendorderid:c,isorder:!0,payload:t,amount:this.getTotal(),orderByName:this.addressForm.controls.userName.value,orderByPhone:this.addressForm.controls.mobile.value,deliveryAddress:this.ygen.getAddress(this.addressForm.value),zipcode:this.addressForm.value.zip,city:this.addressForm.value.city,storeAddress:this.ygen.getAddress(m.db.selectedtenant),storePhone:this.ygen.getCommunityContactPhone(),wheredelivery:this.deliveryType.value,deliverynote:this.deliveryNote.value,storename:this.ygen.communityName(),storeid:this.ygen.communityId(),orderedBy:this.payer.uid,gateway:"?"};"INVALID"!=this.addressForm.status&&this.ydata.getDatabase().object("/profiles/"+this.yauth.getCurrentUserId()).update(this.addressForm.value),this.ygen.getSettings().userazorpay?n.gateway="razorpay":this.ygen.getSettings().usestripe&&(n.gateway="stripe"),this.events.subscribe("order:success["+c+"]",t=>{this.yauth.setlanding(null),this.events.unsubscribe("order:success["+c+"]"),this.ygen.findDistanceForOrder(n.deliveryAddress,!0);let e=this.ydata.getDatabase().createPushId();t.key=e,this.ydata.getDatabase().list(m.P.getpath()+"/shop/orders").set(e,t),this.ynotification.sendNotificationToTakeUser(this.payer.uid,{message:"Order Successfully placed with, OrderID=["+c+"]",path:"order?orderid="+e},"Order Success",!0,!0,!0),this.alertme.successdata("Order Successfully placed with, OrderID=["+c+"]").then(t=>{console.log("done",t)}),this.router.navigate(["/order"],{queryParams:{orderid:e,orderkey:c,orderplaced:!0}}),this.ycat.emptycart(),this.ycat.updateProductQuantity()}),"COD"==this.paymentType.value?(n.paymentmethod="COD",Object.assign(n,{orderedBy:this.payer.uid,odt:+new Date,ostatus:"NEW"}),this.events.publish("order:success["+n.sendorderid+"]",n)):this.ygen.getSettings().userazorpay?(n.gateway="razorpay",this.gotappsettings.subscribe(t=>{t&&this.ypay.pay(n)}).unsubscribe()):this.ygen.getSettings().usestripe?(n.gateway="stripe",this.gotappsettings.subscribe(t=>{t&&this.ystripe.pay(n)}).unsubscribe()):this.alertme.errordata("No Payment Gateway Options enabled")}onCountrySelected(t,e){e.setValue(t.name)}payoptions(t){this.pay(t)}getErrorMessage(t,e){let c="",n=this.getMeErrors({placeholder:e});return Object.keys(n).some(e=>{if(t.errors[e])return c=n[e],!0}),c}getMeErrors(t){return this.yovalidation.genericErrors(t)}getTotal(){let t=this.ycat.getTotal();return"HD"!=this.deliveryType.value||this.ygen.getSettings().freedelivery||(this.ygen.getSettings().freedeliveryoveramount&&this.ygen.getSettings().freedeliveryamount>this.ycat.getTotal()?t+=this.ygen.getSettings().deliverycharges:this.ygen.getSettings().freedeliveryoveramount||(t+=this.ygen.getSettings().deliverycharges)),t}isReady(){let t=!0;return"HD"==this.deliveryType.value?t=!this.addressForm.valid:"SP"==this.deliveryType.value&&(t=this.isrequiredAddressForm()&&!this.addressForm.valid),t}createpickup(t){if(this.ygen.getSettings().deliveryenabled){let e=+new Date,c={pickup_time:this.ygen.getTimeinformat(e,"HH:mm:ss"),pickup_date:this.ygen.getDateinformat(e,"YYYY-MM-DD"),pickup_location:this.ygen.getSettings().warehouse,expected_package_count:1};const n={headers:new y.d({"Content-Type":"application/json",Authorization:"replacetoken"})};let r="https://staging-express.delhivery.com/fm/request/new/";this.ygen.getSettings().testdelivery?n.headers=n.headers.set("Authorization","Token "+this.ygen.getSettings().deliverytokentest):(n.headers=n.headers.set("Authorization","Token "+this.ygen.getSettings().deliverytokenlive),r="https://track.delhivery.com/\u200bfm/request/new/"),this.http.post(r,c,n).pipe(function(t=-1){return e=>e.lift(new u(t,e))}(3),Object(p.a)(t=>Object(g.a)(t))).subscribe(e=>{let c={deliverytrack:e,manualpickup:!1};this.orderlist.getListRefer().update(t,c),this.alertme.openSnackBar("Pick up request created [Auto]","Done")},e=>{this.orderlist.getListRefer().update(t,{manualpickup:!0}),this.alertme.openSnackBar("Pick up request created [Manual]","Ok")})}}onPopstate(){console.log("coming in"),this.ystripe.getHandler().close()}}return t.\u0275fac=function(e){return new(e||t)(b.bc(m.P),b.bc(y.b),b.bc(f.c),b.bc(m.U),b.bc(m.fb),b.bc(m.M),b.bc(m.Q),b.bc(i.j),b.bc(m.T),b.bc(m.Y),b.bc(m.O),b.bc(m.a),b.bc(m.ab),b.bc(m.L),b.bc(m.bb),b.bc(m.Z),b.bc(v.b))},t.\u0275cmp=b.Vb({type:t,selectors:[["app-checkoutdetail"]],viewQuery:function(t,e){var c;1&t&&b.ed(X,!0),2&t&&b.Jc(c=b.qc())&&(e.paypalcontainer=c.first)},hostBindings:function(t,e){1&t&&b.pc("popstate",(function(){return e.onPopstate()}),!1,b.Mc)},decls:9,vars:4,consts:[[3,"color"],["slot","start"],[2,"display","none",3,"src"],["class","ion-padding",4,"ngIf"],[4,"ngIf"],[1,"ion-padding"],["text-center","","class","msgTextSection",4,"ngIf"],["text-center","","class","cartTextSection",4,"ngIf"],[3,"linear"],["stepper",""],["matStepLabel",""],["class","example-radio-group","aria-label","Select an option",3,"formControl",4,"ngIf"],["color","warn","mat-button","","matStepperNext",""],["aria-label","Select an option",1,"example-radio-group",3,"formControl"],["class","example-radio-button","value","COD",4,"ngIf"],["class","example-radio-button","value","PNO",4,"ngIf"],[1,"example-form"],[1,"example-full-width"],["matInput","","placeholder","Ex. Thanks...",3,"formControl"],["text-center","",1,"msgTextSection"],[2,"right","20px","position","absolute"],[2,"display","inline-flex"],["style","padding-right: 5px;",4,"ngIf"],["mat-mini-fab","","style","background: lightgreen;",3,"click",4,"ngIf"],[2,"padding-right","5px"],[3,"mobile"],["mat-mini-fab","",2,"background","lightgreen",3,"click"],["name","logo-whatsapp",2,"font-size","x-large"],["text-center","",1,"cartTextSection"],["name","cart","role","img","aria-label","cart",1,"cartIcon"],["color","success","routerLink","/products"],["class","example-radio-button","value","HD",4,"ngIf"],["class","example-radio-button","value","SP",4,"ngIf"],["value","HD",1,"example-radio-button"],["value","SP",1,"example-radio-button"],["value","COD",1,"example-radio-button"],["value","PNO",1,"example-radio-button"],[1,"example-form",3,"formGroup"],["cellspacing","0",1,"example-full-width"],["yogagainv2InputUpper","","matInput","","formControlName","userName"],[3,"cssClass","preferredCountries","enablePlaceholder","placeholder","enableSearch","formControl","required"],["yogagainv2InputUpper","","matInput","","formControlName","unitName"],["matInput","","placeholder","Ex. CIVIL LINES","formControlName","address"],["matInput","","placeholder","Ex. GONDIA","formControlName","city"],["matInput","","placeholder","Ex. MAHARASHTRA","formControlName","state"],["type","number","matInput","","maxlength","5","placeholder","Ex. 94105","formControlName","zip"],["postalCode",""],["align","end"],[2,"display","none"],["matInput","","type","text","formControlName","country","required","true"],["whatcountry",""],[3,"country","onCountrySelected"],[3,"color",4,"ngIf"],["style","margin: 0 auto;display: flex;justify-content: center;padding-top: 10px;",4,"ngIf"],[1,"delivery"],[1,"footerCartSection"],["color","danger",3,"disabled","click",4,"ngIf"],["color","danger",4,"ngIf"],["color","danger",3,"disabled","click"],["color","danger"],[2,"margin","0 auto","display","flex","justify-content","center","padding-top","10px"],["paypalcontainer",""]],template:function(t,e){1&t&&(b.hc(0,"ion-header"),b.hc(1,"ion-toolbar",0),b.hc(2,"ion-buttons",1),b.cc(3,"ion-back-button"),b.gc(),b.hc(4,"ion-title"),b.Xc(5,"Payment/Delivery"),b.gc(),b.gc(),b.gc(),b.cc(6,"img",2),b.Vc(7,et,43,23,"ion-content",3),b.Vc(8,at,4,3,"ion-footer",4)),2&t&&(b.Ob(1),b.Cc("color","warning"),b.Ob(5),b.Ec("src","",e.serverpath,"/favicon.png",b.Pc),b.Ob(1),b.Cc("ngIf",e.payer),b.Ob(1),b.Cc("ngIf",e.payer&&e.ycat.getcartcount()>0))},directives:[o.y,o.hb,o.j,o.f,o.g,o.fb,n.m,o.s,O.e,O.a,O.b,C.a,O.d,S.b,r.o,r.e,r.w,r.p,r.q,x.c,x.g,I.b,r.b,m.j,o.z,o.i,o.sb,i.l,S.a,r.h,m.u,r.f,k.a,r.u,x.f,r.s,r.j,w.a,x.b,o.w,o.cb],pipes:[N.c],styles:[".footerCartSection[_ngcontent-%COMP%]{margin-right:10px;margin-left:10px}.delivery[_ngcontent-%COMP%], .footerCartSection[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.mat-form-field-infix[_ngcontent-%COMP%]{width:150px;max-width:150px}  .mat-form-field-infix{width:150px!important}.example-full-width[_ngcontent-%COMP%]{width:100%}td[_ngcontent-%COMP%]{padding-right:8px}.example-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.example-radio-button[_ngcontent-%COMP%]{margin:5px}.msgTextSection[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:20px}  .mat-vertical-content{padding:0!important}.example-form[_ngcontent-%COMP%]{padding:0}"]}),t})()}];let gt=(()=>{class t{}return t.\u0275mod=b.Zb({type:t}),t.\u0275inj=b.Yb({factory:function(e){return new(e||t)},imports:[[n.c,r.i,o.ib,m.H,m.o,m.b,r.t,i.n.forChild(st)]]}),t})()}}]);