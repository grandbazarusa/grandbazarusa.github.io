(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{AWRA:function(t,c,e){"use strict";e.r(c),e.d(c,"SubscriptionPageModule",(function(){return w}));var n=e("ofXK"),i=e("3Pt+"),a=e("tyNb"),s=e("TEn/"),o=e("pwB6"),r=e("wd/R"),d=e("tk/3"),g=e("un/a"),p=e("fXoL"),h=e("0IaG"),u=e("Wp6s"),b=e("bTqV");function m(t,c){1&t&&(p.hc(0,"div"),p.hc(1,"h1"),p.Xc(2," Your subscription Ended, Please Renew..."),p.gc(),p.gc())}function l(t,c){if(1&t){const t=p.ic();p.hc(0,"div",17),p.hc(1,"div",18),p.hc(2,"mat-card",19),p.hc(3,"div",20),p.Xc(4,"Basic"),p.gc(),p.hc(5,"mat-card-content"),p.hc(6,"h4",21),p.Xc(7,"6 Months"),p.gc(),p.hc(8,"p"),p.Xc(9,"Your Store will be activated for 06 months in "),p.gc(),p.hc(10,"div"),p.hc(11,"b"),p.Xc(12),p.gc(),p.gc(),p.gc(),p.hc(13,"mat-card-footer"),p.hc(14,"div",13),p.hc(15,"button",22),p.pc("click",(function(){return p.Nc(t),p.tc().renew(6)})),p.Xc(16,"Renew"),p.gc(),p.gc(),p.gc(),p.gc(),p.hc(17,"mat-card",23),p.hc(18,"div",24),p.Xc(19,"Premium"),p.gc(),p.hc(20,"mat-card-content"),p.hc(21,"h4",21),p.Xc(22,"12 Months"),p.gc(),p.hc(23,"p"),p.Xc(24,"Your Store will be activated for 12 months in "),p.gc(),p.hc(25,"div"),p.hc(26,"b"),p.Xc(27),p.gc(),p.gc(),p.gc(),p.hc(28,"mat-card-footer"),p.hc(29,"div",13),p.hc(30,"button",25),p.pc("click",(function(){return p.Nc(t),p.tc().renew(12)})),p.Xc(31,"Renew"),p.gc(),p.gc(),p.gc(),p.gc(),p.gc(),p.gc()}if(2&t){const t=p.tc();p.Ob(12),p.Zc("",t.ygen.getcurrencysymbol()," 3,999"),p.Ob(15),p.Zc("",t.ygen.getcurrencysymbol()," 5,999")}}function y(t,c){if(1&t){const t=p.ic();p.hc(0,"div",26),p.hc(1,"div",27),p.hc(2,"input",28),p.pc("ngModelChange",(function(c){return p.Nc(t),p.tc().numberofdays=c})),p.gc(),p.gc(),p.hc(3,"div"),p.hc(4,"button",29),p.pc("click",(function(){return p.Nc(t),p.tc().addDays()})),p.Xc(5,"Add Grace Days"),p.gc(),p.gc(),p.gc()}if(2&t){const t=p.tc();p.Ob(2),p.Cc("ngModel",t.numberofdays)}}function f(t,c){if(1&t&&(p.hc(0,"mat-card",3),p.hc(1,"mat-card-header"),p.hc(2,"mat-card-title"),p.Xc(3,"Your Payment History"),p.gc(),p.gc(),p.hc(4,"mat-card-content"),p.hc(5,"div",5),p.hc(6,"div",6),p.Xc(7,"Paid on"),p.gc(),p.hc(8,"div",7),p.Xc(9),p.gc(),p.gc(),p.hc(10,"div",5),p.hc(11,"div",6),p.Xc(12,"Paid For"),p.gc(),p.hc(13,"div",7),p.Xc(14),p.gc(),p.gc(),p.hc(15,"div",5),p.hc(16,"div",6),p.Xc(17,"Paid Reference"),p.gc(),p.hc(18,"div",7),p.Xc(19),p.gc(),p.gc(),p.gc(),p.gc()),2&t){const t=c.$implicit,e=p.tc();p.Ob(9),p.Zc("",e.ygen.formatTimestampToDate(t.paydate)," "),p.Ob(5),p.ad("",e.ygen.getcurrencysymbol()," ",t.amount," "),p.Ob(5),p.Zc("",e.ygen.formatTimestampToDate(null==t.paymentResponse?null:t.paymentResponse.payment_id)," ")}}const v=[{path:"",component:(()=>{class t{constructor(t,c,e,n,i,a,s,r,d,g,p){this.events=t,this.http=c,this.ypay=e,this.yauth=n,this.ygen=i,this.alertme=a,this.route=s,this.router=r,this.ysharedata=d,this.ydata=g,this.dialog=p,this.priceitem={},this.subscription={},this.crudList=new o.p(o.R.getpath()+"/launchapp/renewpayments",g.getDatabase(),!0,this.ygen.getUid()),this.priceitem=this.yauth.getappSettings()}ngOnInit(){this.renewlist=this.crudList.getList(),this.subscription=this.yauth.subscriptionaccount}navigate(t,c){this.ysharedata.setData("currentevent",c),this.router.navigate([t],{queryParams:c})}renew(t){let c=6==t?this.priceitem.appsix?this.priceitem.appsix:3999:this.priceitem.apptwelve?this.priceitem.apptwelve:5999,e="business";12==t&&(e="premium");let n=this.ydata.getDatabase().createPushId();this.ypay.pay({sendorderid:n,renewapp:!0,isorder:!1,amount:c}),this.events.subscribe("renew:success["+n+"]",c=>{this.events.unsubscribe("renew:success["+n+"]");let i=+new Date,a=30*t+7,s=+r(new Date(i)).add(a,"days");this.yauth.subscriptionaccount.subscriptiondate=s,this.yauth.issubscriptionon=!0,this.yauth.subscriptiontype=e,this.subscription=this.yauth.subscriptionaccount,this.ydata.getDatabase().object(o.R.getpath()+"/launchapp").update({subscriptiondate:s,subscriptiontype:e});let d=this.ydata.getDatabase().createPushId();this.crudList.getListRefer().set(d,c),this.capturepayment(c),this.alertme.successdata("You have Successfully Renewed your Subscription with us, Congratulations").then(t=>{console.log("done11",t),this.events.publish("shop:checksubscription")})})}addDays(){this.yauth.addDaysToSubscription(this.numberofdays)}capturepayment(t){this.yauth.getappSettings();let c=`https://guarded-sea-64699.herokuapp.com/rest/razor/renew?testmode=true&paymentid=${t.paymentResponse.payment_id}`,e={amount:100*t.amount,currency:"INR"};const n={headers:new d.d({"Content-Type":"application/json",Authorization:"yoyo"})};this.http.post(c,e,n).pipe(Object(g.a)(2)).subscribe(t=>{console.log("capture payment",t)},t=>{})}}return t.\u0275fac=function(c){return new(c||t)(p.bc(o.ab),p.bc(d.b),p.bc(o.bb),p.bc(o.O),p.bc(o.V),p.bc(o.a),p.bc(a.a),p.bc(a.j),p.bc(o.T),p.bc(o.S),p.bc(h.b))},t.\u0275cmp=p.Vb({type:t,selectors:[["app-subscription"]],decls:44,vars:11,consts:[[3,"color"],["slot","start"],[1,"ion-padding"],[1,"example-card"],["mat-card-avatar","",1,"example-header-image"],[1,"container"],[1,"item","ylable"],[1,"item","ytext"],[1,"ycricle"],[1,"counter"],[1,"dte"],[4,"ngIf"],["class","pricetable","style","display: flex;",4,"ngIf"],[1,"containerb"],["mat-button","","color","warning","routerLink","/dashboard"],["style","padding: 20px;display: flex; flex-direction: column; align-items: center;",4,"ngIf"],["class","example-card",4,"ngFor","ngForOf"],[1,"pricetable",2,"display","flex"],[1,"md-padding"],[1,"priceclass","basicback"],[1,"myhead","basic"],["layout","row","layout-align","center",1,"md-title"],["mat-button","","color","warning",3,"click"],[1,"priceclass","preimumback"],[1,"myhead","premium"],["mat-button","",3,"click"],[2,"padding","20px","display","flex","flex-direction","column","align-items","center"],[2,"font-size","xxx-large"],["min","1","max","360","type","number","placeholder","Add number of days",3,"ngModel","ngModelChange"],["mat-button","","color","warn",3,"click"]],template:function(t,c){1&t&&(p.hc(0,"ion-toolbar",0),p.hc(1,"ion-buttons",1),p.cc(2,"ion-menu-button"),p.gc(),p.hc(3,"ion-buttons",1),p.cc(4,"ion-back-button"),p.gc(),p.hc(5,"ion-title"),p.Xc(6,"Subscription Information"),p.gc(),p.gc(),p.hc(7,"ion-content",2),p.hc(8,"mat-card",3),p.hc(9,"mat-card-header"),p.cc(10,"div",4),p.hc(11,"mat-card-title"),p.Xc(12,"Your Store Subscription"),p.gc(),p.gc(),p.hc(13,"mat-card-content"),p.hc(14,"div",5),p.hc(15,"div",6),p.Xc(16,"Store Launch on"),p.gc(),p.hc(17,"div",7),p.Xc(18),p.gc(),p.gc(),p.hc(19,"div",5),p.hc(20,"div",6),p.Xc(21,"Subscription End Date"),p.gc(),p.hc(22,"div",7),p.Xc(23),p.gc(),p.gc(),p.hc(24,"div",5),p.hc(25,"div",6),p.Xc(26,"Current Subscription"),p.gc(),p.hc(27,"div",7),p.Xc(28),p.gc(),p.gc(),p.hc(29,"div"),p.hc(30,"div",8),p.hc(31,"div",9),p.Xc(32),p.gc(),p.gc(),p.hc(33,"div",10),p.Xc(34,"Days to Expiry"),p.gc(),p.gc(),p.Vc(35,m,3,0,"div",11),p.Vc(36,l,32,2,"div",12),p.gc(),p.hc(37,"mat-card-actions"),p.hc(38,"div",13),p.hc(39,"button",14),p.Xc(40,"Cancel"),p.gc(),p.gc(),p.gc(),p.gc(),p.Vc(41,y,6,1,"div",15),p.Vc(42,f,20,4,"mat-card",16),p.uc(43,"async"),p.gc()),2&t&&(p.Cc("color","warning"),p.Ob(18),p.Zc("",c.ygen.formatTimestampToDate(c.subscription.lanunchdate)," "),p.Ob(5),p.Zc("",c.ygen.formatTimestampToDate(c.subscription.subscriptiondate)," "),p.Ob(5),p.Zc("",c.ygen.getSubscriptionType()," "),p.Ob(4),p.Zc(" ",c.subscription.subscriptiondaysremaining," "),p.Ob(3),p.Cc("ngIf",!c.subscription.issubscriptionon),p.Ob(1),p.Cc("ngIf",c.subscription.subscriptiondaysremaining<=14),p.Ob(5),p.Cc("ngIf",c.ygen.isSuperAdmin()),p.Ob(1),p.Cc("ngForOf",p.vc(43,9,c.renewlist)))},directives:[s.fb,s.j,s.L,s.f,s.g,s.db,s.s,u.a,u.f,u.c,u.h,u.d,n.m,u.b,b.a,s.qb,a.l,n.l,u.e,i.s,i.b,i.o,i.r],pipes:[n.b],styles:[".example-card[_ngcontent-%COMP%]{max-width:400px;margin:auto}.container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.containerb[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.item[_ngcontent-%COMP%]{font-size:15px}.ytext[_ngcontent-%COMP%]{font-weight:700}.counter[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:small}.ycricle[_ngcontent-%COMP%]{width:200px;height:200px;border-radius:50%;font-size:40px;line-height:200px;text-align:center;background:#000;color:#fff;margin:10px auto}.priceclass[_ngcontent-%COMP%]{width:46%;margin-right:5px;background:rgba(0,0,0,.17)}.md-padding[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myhead[_ngcontent-%COMP%]{font-size:20px;font-weight:700;margin-bottom:10px;text-align:center;padding:10px}.basic[_ngcontent-%COMP%], .myhead[_ngcontent-%COMP%]{background:rgba(0,255,255,.2)}.premimum[_ngcontent-%COMP%]{background:rgba(255,0,0,.32)}.premimumback[_ngcontent-%COMP%]{background:rgba(16,3,3,.17)}.basicback[_ngcontent-%COMP%]{background:rgba(0,0,2,.11)}.mat-card-footer[_ngcontent-%COMP%]{background:#ffb6c1}.dte[_ngcontent-%COMP%]{position:absolute;left:41%;top:42%;color:#7fffd4}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{opacity:1;font-size:xxx-large}"]}),t})()}];let w=(()=>{class t{}return t.\u0275mod=p.Zb({type:t}),t.\u0275inj=p.Yb({factory:function(c){return new(c||t)},imports:[[n.c,i.i,s.gb,o.J,o.o,o.b,a.n.forChild(v)]]}),t})()}}]);