(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{"+ltH":function(t,n,e){"use strict";e.r(n),e.d(n,"ProductsPageModule",(function(){return w}));var o=e("ofXK"),c=e("3Pt+"),i=e("tyNb"),a=e("TEn/"),r=e("pwB6"),s=e("q3Kh"),d=e("fXoL"),p=e("0IaG"),u=e("1jcm"),g=e("hV0v"),l=e("sYmb");const h=["yocameraelement"];function b(t,n){if(1&t){const t=d.ic();d.hc(0,"ion-button",4),d.pc("click",(function(){return d.Nc(t),d.tc().navigate("product",{previousUrl:"products"})})),d.cc(1,"ion-icon",8),d.gc()}}function y(t,n){if(1&t){const t=d.ic();d.hc(0,"ion-item"),d.hc(1,"div",9),d.hc(2,"app-appicon",10),d.pc("actionEvent",(function(n){return d.Nc(t),d.tc().downloadProducts(n)})),d.gc(),d.hc(3,"div"),d.hc(4,"mat-slide-toggle",11),d.pc("ngModelChange",(function(n){return d.Nc(t),d.tc().uploaded=n})),d.Xc(5),d.uc(6,"translate"),d.gc(),d.gc(),d.hc(7,"app-appicon",10),d.pc("actionEvent",(function(n){return d.Nc(t),d.tc().deleteproducts(n)})),d.gc(),d.gc(),d.gc()}if(2&t){const t=d.tc();d.Ob(2),d.Cc("icon","cloud_download")("askquestion",!1)("icontext","Download Products")("isiconwithtext",!0),d.Ob(2),d.Cc("ngModel",t.uploaded),d.Ob(1),d.Zc("",d.vc(6,10,"Uploaded Flag")," "),d.Ob(2),d.Cc("icon","delete")("askquestion",!0)("icontext","Delete All Products")("isiconwithtext",!0)}}function m(t,n){if(1&t){const t=d.ic();d.hc(0,"ion-item"),d.hc(1,"div",9),d.hc(2,"app-appicon",10),d.pc("actionEvent",(function(){return d.Nc(t),d.tc().ygen.routeto("uploadcatalog",{})})),d.gc(),d.gc(),d.gc()}2&t&&(d.Ob(2),d.Cc("icon","cloud_upload")("askquestion",!1)("icontext","Upload Products")("isiconwithtext",!0))}function f(t,n){if(1&t&&d.cc(0,"app-productcard-grandbazar",12),2&t){const t=n.$implicit,e=d.tc();d.Cc("product",t)("productlist",e.crudList)("onpage","products")}}let x=(()=>{class t{constructor(t,n,e,o,c,i,a,s,d,p,u,g,l){this.ycat=t,this.ycamera=n,this.ygen=e,this.alertme=o,this.route=c,this.router=i,this.boardService=a,this.ysharedata=s,this.ydata=d,this.dialog=p,this.excelservice=u,this.yalert=g,this.centerdb=l,this.imagescapturedComp=new Map,this.screenrefresh=!0,this.uploaded=!0,this.mystrip=[],this.showre=!1,this.sourcere="",this.refreshme=!1,this.centerdb.currenttenant.subscribe(t=>{this.crudList=new r.p(r.P.getpath()+"/shop/products",d.getDatabase(),!0,this.ygen.getUid()),this.events=this.crudList.getList()})}deleteproduct(t){this.crudList.removefromList(t)}deleteproducts(t){this.ydata.getDatabase().list("/shop/products").remove()}copyProduct(t){let n=Object.assign({},t);delete n.$key,this.crudList.addtolist(n)}deletesubcategory(t,n){this.ydata.getDatabase().list(r.P.getpath()+"/shop/products/"+n+"/subcategory/"+t).remove()}navigate(t,n){this.ysharedata.setData("currentevent",n),this.router.navigate([t],{queryParams:n})}ngOnInit(){}addtocart(t,n,e){e&&(n.orderqty=0);let o=n.orderqty?n.orderqty+t:1;o>n.maxqty?this.alertme.openSnackBar(`Maximum quantiy you can order is ${n.maxqty}`,"Ok"):(Object.assign(n,{orderqty:o}),this.ycat.iscartItem(n)?this.ycat.updatequantity(n):1==o&&(this.alertme.openSnackBar(`Your shopping cart updated with ${n.orderqty} quantity`,"Ok"),this.ycat.addtocart(n))),0==n.orderqty&&this.ycat.delete(n)}downloadProducts(t){let n=this.crudList.getListRefer().snapshotChanges().pipe(Object(s.map)(t=>t.map(t=>Object.assign({$key:t.payload.key},t.payload.val())))).subscribe(t=>{n.unsubscribe();let e=[],o=0;t.forEach(t=>{o+=1;let n={$key:JSON.stringify(t.$key),category:t.category,subcategory:t.subcategory,brand:t.brand,title:t.title,description:t.description,image:t.image,imageuploaded:t.imageuploaded,isorganic:t.isorganic,istopsaver:t.istopsaver,isveg:t.isveg,maxqty:t.maxqty,mrp:t.mrp,price:t.price,outofstock:t.outofstock,uploaded:this.uploaded,heavydiscount:t.heavydiscount,newarrival:t.heavydiscount};if(t.variations){let e=[];Object.values(t.variations).forEach(t=>{e.push({description:t.description,mrp:t.mrp,price:t.price,maxqty:t.maxqty})}),e.length>0&&(n.variations=JSON.stringify(Object.values(e)).replace(/,/g,"|"))}else n.variations="";e.push(n)}),0==e.length?this.yalert.openSnackBar("No products for downlowd","Ok"):(this.excelservice.exportAsExcelFile(e,"products"),this.yalert.openSnackBar("All Products will be downloaded...","Ok"))})}}return t.\u0275fac=function(n){return new(n||t)(d.bc(r.O),d.bc(r.N),d.bc(r.T),d.bc(r.a),d.bc(i.a),d.bc(i.j),d.bc(r.i),d.bc(r.R),d.bc(r.Q),d.bc(p.b),d.bc(r.r),d.bc(r.a),d.bc(r.P))},t.\u0275cmp=d.Vb({type:t,selectors:[["app-products"]],viewQuery:function(t,n){var e;1&t&&(d.ed(h,!0),d.ed(h,!0)),2&t&&(d.Jc(e=d.qc())&&(n.yocam=e.first),d.Jc(e=d.qc())&&(n.yocamViewChildren=e))},decls:17,vars:10,consts:[[3,"color"],["slot","start"],["slot","end","color","secondary"],[3,"click",4,"ngIf"],[3,"click"],[4,"ngIf"],[1,"productlist"],[3,"product","productlist","onpage",4,"ngFor","ngForOf"],["slot","icon-only","name","add"],[1,"bbcontainer"],[3,"icon","askquestion","icontext","isiconwithtext","actionEvent"],[3,"ngModel","ngModelChange"],[3,"product","productlist","onpage"]],template:function(t,n){1&t&&(d.hc(0,"ion-header"),d.hc(1,"ion-toolbar",0),d.hc(2,"ion-buttons",1),d.cc(3,"ion-menu-button"),d.gc(),d.hc(4,"ion-title"),d.Xc(5),d.uc(6,"translate"),d.gc(),d.hc(7,"ion-buttons",2),d.Vc(8,b,2,0,"ion-button",3),d.hc(9,"ion-button",4),d.pc("click",(function(){return n.navigate("checkout",{})})),d.cc(10,"app-appcart"),d.gc(),d.gc(),d.gc(),d.gc(),d.hc(11,"ion-content"),d.Vc(12,y,8,12,"ion-item",5),d.Vc(13,m,3,4,"ion-item",5),d.hc(14,"div",6),d.Vc(15,f,1,3,"app-productcard-grandbazar",7),d.uc(16,"async"),d.gc(),d.gc()),2&t&&(d.Ob(1),d.Cc("color","warning"),d.Ob(4),d.Yc(d.vc(6,6,"Products")),d.Ob(3),d.Cc("ngIf",n.ygen.isAdmin()&&n.ygen.canAddProducts()),d.Ob(4),d.Cc("ngIf",n.ygen.isAdmin()),d.Ob(1),d.Cc("ngIf",n.ygen.isAdmin()),d.Ob(2),d.Cc("ngForOf",d.vc(16,8,n.events)))},directives:[a.y,a.hb,a.j,a.N,a.fb,o.m,a.i,r.d,a.s,o.l,a.z,a.D,r.f,u.a,c.o,c.r,g.a],pipes:[l.c,o.b],styles:[".bbcontainer[_ngcontent-%COMP%]{justify-content:space-around;width:100%}.bbcontainer[_ngcontent-%COMP%], .bcontainer[_ngcontent-%COMP%]{display:flex;flex-direction:row}.bcontainer[_ngcontent-%COMP%]{justify-content:space-between}.subcataction[_ngcontent-%COMP%]{display:flex}app-appicon[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%], app-appicon[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:36px}.productCard[_ngcontent-%COMP%]{display:inline-block;white-space:pre-line;padding:2px auto;width:calc(70% - 20px);height:auto;box-shadow:0 4px 16px rgba(156,153,153,.97);--box-shadow:0 4px 16px rgba(156,153,153,0.97)}.cardBorderRadius[_ngcontent-%COMP%]{--border-radius:8px;border-radius:8px;width:100%;height:100%;min-width:200px}.productImage[_ngcontent-%COMP%]{padding:0 40px;position:relative;margin-top:10px}.discountSection[_ngcontent-%COMP%]{background:#15bf15;color:#fff;position:absolute;padding:6px 16px;border-radius:5px;font-weight:700;margin-top:13px;left:10px}.soldoutSection[_ngcontent-%COMP%]{background:var(--ion-color-design);color:#db4ba4;margin-top:-16px}.outofstockSection[_ngcontent-%COMP%], .soldoutSection[_ngcontent-%COMP%]{position:absolute;padding:6px 16px;border-radius:5px;font-weight:700;right:10px}.outofstockSection[_ngcontent-%COMP%]{background:#b4b108;color:#fff;margin-top:-24%}.dFlexAlignItemCenter[_ngcontent-%COMP%]{display:flex;align-items:center}.subTitle[_ngcontent-%COMP%]{font-size:16px;text-decoration:line-through;padding-left:16px;color:#000}.productDesc[_ngcontent-%COMP%]{color:var(--ion-color-dark);padding-bottom:16px}.productQty[_ngcontent-%COMP%]{color:#000;font-weight:700}.inner-scroll[_ngcontent-%COMP%]   .scroll-y[_ngcontent-%COMP%]   .overscroll[_ngcontent-%COMP%]{padding:0}ion-card[_ngcontent-%COMP%]{width:100%;height:100%;margin-left:unset;margin-right:unset;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-bottom:0}img[_ngcontent-%COMP%]{height:180px;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content;margin:auto}.button-inner[_ngcontent-%COMP%]{justify-content:space-between}ion-button[_ngcontent-%COMP%]{height:auto;color:#8b0000}.productlist[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;align-items:stretch}"]}),t})();var O=e("uUdd");const v=[{path:"",component:x}];let w=(()=>{class t{}return t.\u0275mod=d.Zb({type:t}),t.\u0275inj=d.Yb({factory:function(n){return new(n||t)},imports:[[o.c,c.i,a.ib,r.H,r.o,r.b,O.a,i.n.forChild(v)]]}),t})()}}]);