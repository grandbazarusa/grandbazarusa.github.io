(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{AWRA:function(c,t,e){"use strict";e.r(t),e.d(t,"SubscriptionPageModule",(function(){return w}));var n=e("ofXK"),i=e("3Pt+"),a=e("tyNb"),s=e("TEn/"),r=e("pwB6"),o=e("wd/R"),u=e("tk/3"),d=e("un/a"),g=e("fXoL"),p=e("0IaG"),h=e("Wp6s"),b=e("bTqV"),l=e("sYmb");function m(c,t){1&c&&(g.hc(0,"div"),g.hc(1,"h1"),g.Xc(2),g.uc(3,"translate"),g.gc(),g.gc()),2&c&&(g.Ob(2),g.Zc(" ",g.vc(3,1,"Your subscription Ended, Please Renew"),"..."))}function y(c,t){if(1&c){const c=g.ic();g.hc(0,"div",17),g.hc(1,"div",18),g.hc(2,"mat-card",19),g.hc(3,"div",20),g.Xc(4),g.uc(5,"translate"),g.gc(),g.hc(6,"mat-card-content"),g.hc(7,"h4",21),g.Xc(8),g.uc(9,"translate"),g.gc(),g.hc(10,"p"),g.Xc(11),g.uc(12,"translate"),g.gc(),g.hc(13,"div"),g.hc(14,"b"),g.Xc(15),g.gc(),g.gc(),g.gc(),g.hc(16,"mat-card-footer"),g.hc(17,"div",13),g.hc(18,"button",22),g.pc("click",(function(){return g.Nc(c),g.tc().renew(6)})),g.Xc(19),g.uc(20,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(21,"mat-card",23),g.hc(22,"div",24),g.Xc(23),g.uc(24,"translate"),g.gc(),g.hc(25,"mat-card-content"),g.hc(26,"h4",21),g.Xc(27),g.uc(28,"translate"),g.gc(),g.hc(29,"p"),g.Xc(30),g.uc(31,"translate"),g.gc(),g.hc(32,"div"),g.hc(33,"b"),g.Xc(34),g.gc(),g.gc(),g.gc(),g.hc(35,"mat-card-footer"),g.hc(36,"div",13),g.hc(37,"button",25),g.pc("click",(function(){return g.Nc(c),g.tc().renew(12)})),g.Xc(38),g.uc(39,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc()}if(2&c){const c=g.tc();g.Ob(4),g.Yc(g.vc(5,10,"Basic")),g.Ob(4),g.Yc(g.vc(9,12,"6 Months")),g.Ob(3),g.Zc("",g.vc(12,14,"Your Store will be activated for 06 months in")," "),g.Ob(4),g.Zc("",c.ygen.getcurrencysymbol()," 3,999"),g.Ob(4),g.Yc(g.vc(20,16,"Renew")),g.Ob(4),g.Yc(g.vc(24,18,"Premium")),g.Ob(4),g.Yc(g.vc(28,20,"12 Months")),g.Ob(3),g.Zc("",g.vc(31,22,"Your Store will be activated for 12 months in")," "),g.Ob(4),g.Zc("",c.ygen.getcurrencysymbol()," 5,999"),g.Ob(4),g.Yc(g.vc(39,24,"Renew"))}}function f(c,t){if(1&c){const c=g.ic();g.hc(0,"div",26),g.hc(1,"div",27),g.hc(2,"input",28),g.pc("ngModelChange",(function(t){return g.Nc(c),g.tc().numberofdays=t})),g.gc(),g.gc(),g.hc(3,"div"),g.hc(4,"button",29),g.pc("click",(function(){return g.Nc(c),g.tc().addDays()})),g.Xc(5),g.uc(6,"translate"),g.gc(),g.gc(),g.gc()}if(2&c){const c=g.tc();g.Ob(2),g.Cc("ngModel",c.numberofdays),g.Ob(3),g.Yc(g.vc(6,2,"Add Grace Days"))}}function v(c,t){if(1&c&&(g.hc(0,"mat-card",3),g.hc(1,"mat-card-header"),g.hc(2,"mat-card-title"),g.Xc(3),g.uc(4,"translate"),g.gc(),g.gc(),g.hc(5,"mat-card-content"),g.hc(6,"div",5),g.hc(7,"div",6),g.Xc(8),g.uc(9,"translate"),g.gc(),g.hc(10,"div",7),g.Xc(11),g.gc(),g.gc(),g.hc(12,"div",5),g.hc(13,"div",6),g.Xc(14),g.uc(15,"translate"),g.gc(),g.hc(16,"div",7),g.Xc(17),g.gc(),g.gc(),g.hc(18,"div",5),g.hc(19,"div",6),g.Xc(20),g.uc(21,"translate"),g.gc(),g.hc(22,"div",7),g.Xc(23),g.gc(),g.gc(),g.gc(),g.gc()),2&c){const c=t.$implicit,e=g.tc();g.Ob(3),g.Yc(g.vc(4,8,"Your Payment History")),g.Ob(5),g.Yc(g.vc(9,10,"Paid on")),g.Ob(3),g.Zc("",e.ygen.formatTimestampToDate(c.paydate)," "),g.Ob(3),g.Yc(g.vc(15,12,"Paid For")),g.Ob(3),g.ad("",e.ygen.getcurrencysymbol()," ",c.amount," "),g.Ob(3),g.Yc(g.vc(21,14,"Paid Reference")),g.Ob(3),g.Zc("",e.ygen.formatTimestampToDate(null==c.paymentResponse?null:c.paymentResponse.payment_id)," ")}}const O=[{path:"",component:(()=>{class c{constructor(c,t,e,n,i,a,s,o,u,d,g){this.events=c,this.http=t,this.ypay=e,this.yauth=n,this.ygen=i,this.alertme=a,this.route=s,this.router=o,this.ysharedata=u,this.ydata=d,this.dialog=g,this.priceitem={},this.subscription={},this.crudList=new r.p(r.R.getpath()+"/launchapp/renewpayments",d.getDatabase(),!0,this.ygen.getUid()),this.priceitem=this.yauth.getappSettings()}ngOnInit(){this.renewlist=this.crudList.getList(),this.subscription=this.yauth.subscriptionaccount}navigate(c,t){this.ysharedata.setData("currentevent",t),this.router.navigate([c],{queryParams:t})}renew(c){let t=6==c?this.priceitem.appsix?this.priceitem.appsix:3999:this.priceitem.apptwelve?this.priceitem.apptwelve:5999,e="business";12==c&&(e="premium");let n=this.ydata.getDatabase().createPushId(),i={sendorderid:n,renewapp:!0,isorder:!1,amount:t,trancurrency:this.ygen.getTranCurrency().toLowerCase()};this.ypay.pay(i),this.events.subscribe("renew:success["+n+"]",t=>{this.events.unsubscribe("renew:success["+n+"]");let i=+new Date,a=30*c+7+this.subscription.subscriptiondaysremaining,s=+o(new Date(i)).add(a,"days");this.yauth.subscriptionaccount.subscriptiondate=s,this.yauth.issubscriptionon=!0,this.yauth.subscriptiontype=e,this.subscription=this.yauth.subscriptionaccount,this.ydata.getDatabase().object(r.R.getpath()+"/launchapp").update({subscriptiondate:s,subscriptiontype:e});let u=this.ydata.getDatabase().createPushId();this.crudList.getListRefer().set(u,t),this.alertme.successdata("You have Successfully Renewed your Subscription with us, Congratulations").then(c=>{console.log("done11",c),this.events.publish("shop:checksubscription")})})}addDays(){this.yauth.addDaysToSubscription(this.numberofdays)}capturepayment(c){this.yauth.getappSettings();let t=`https://guarded-sea-64699.herokuapp.com/rest/razor/renew?testmode=true&paymentid=${c.paymentResponse.payment_id}`,e={amount:100*c.amount,currency:"INR"};const n={headers:new u.d({"Content-Type":"application/json",Authorization:"yoyo"})};this.http.post(t,e,n).pipe(Object(d.a)(2)).subscribe(c=>{console.log("capture payment",c)},c=>{})}}return c.\u0275fac=function(t){return new(t||c)(g.bc(r.ab),g.bc(u.b),g.bc(r.N),g.bc(r.O),g.bc(r.V),g.bc(r.a),g.bc(a.a),g.bc(a.j),g.bc(r.T),g.bc(r.S),g.bc(p.b))},c.\u0275cmp=g.Vb({type:c,selectors:[["app-subscription"]],decls:51,vars:32,consts:[[3,"color"],["slot","start"],[1,"ion-padding"],[1,"example-card"],["mat-card-avatar","",1,"example-header-image"],[1,"container"],[1,"item","ylable"],[1,"item","ytext"],[1,"ycricle"],[1,"counter"],[1,"dte"],[4,"ngIf"],["class","pricetable","style","display: flex;",4,"ngIf"],[1,"containerb"],["mat-button","","color","warning","routerLink","/dashboard"],["style","padding: 20px;display: flex; flex-direction: column; align-items: center;",4,"ngIf"],["class","example-card",4,"ngFor","ngForOf"],[1,"pricetable",2,"display","flex"],[1,"md-padding"],[1,"priceclass","basicback"],[1,"myhead","basic"],["layout","row","layout-align","center",1,"md-title"],["mat-button","","color","warning",3,"click"],[1,"priceclass","preimumback"],[1,"myhead","premium"],["mat-button","",3,"click"],[2,"padding","20px","display","flex","flex-direction","column","align-items","center"],[2,"font-size","xxx-large"],["min","1","max","360","type","number","placeholder","Add number of days",3,"ngModel","ngModelChange"],["mat-button","","color","warn",3,"click"]],template:function(c,t){1&c&&(g.hc(0,"ion-toolbar",0),g.hc(1,"ion-buttons",1),g.cc(2,"ion-menu-button"),g.gc(),g.hc(3,"ion-buttons",1),g.cc(4,"ion-back-button"),g.gc(),g.hc(5,"ion-title"),g.Xc(6),g.uc(7,"translate"),g.gc(),g.gc(),g.hc(8,"ion-content",2),g.hc(9,"mat-card",3),g.hc(10,"mat-card-header"),g.cc(11,"div",4),g.hc(12,"mat-card-title"),g.Xc(13),g.uc(14,"translate"),g.gc(),g.gc(),g.hc(15,"mat-card-content"),g.hc(16,"div",5),g.hc(17,"div",6),g.Xc(18),g.uc(19,"translate"),g.gc(),g.hc(20,"div",7),g.Xc(21),g.gc(),g.gc(),g.hc(22,"div",5),g.hc(23,"div",6),g.Xc(24),g.uc(25,"translate"),g.gc(),g.hc(26,"div",7),g.Xc(27),g.gc(),g.gc(),g.hc(28,"div",5),g.hc(29,"div",6),g.Xc(30),g.uc(31,"translate"),g.gc(),g.hc(32,"div",7),g.Xc(33),g.gc(),g.gc(),g.hc(34,"div"),g.hc(35,"div",8),g.hc(36,"div",9),g.Xc(37),g.gc(),g.gc(),g.hc(38,"div",10),g.Xc(39),g.uc(40,"translate"),g.gc(),g.gc(),g.Vc(41,m,4,3,"div",11),g.Vc(42,y,40,26,"div",12),g.gc(),g.hc(43,"mat-card-actions"),g.hc(44,"div",13),g.hc(45,"button",14),g.Xc(46),g.uc(47,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.Vc(48,f,7,4,"div",15),g.Vc(49,v,24,16,"mat-card",16),g.uc(50,"async"),g.gc()),2&c&&(g.Cc("color","warning"),g.Ob(6),g.Yc(g.vc(7,16,"Subscription Information")),g.Ob(7),g.Yc(g.vc(14,18,"Your Store Subscription")),g.Ob(5),g.Yc(g.vc(19,20,"Store Launch on")),g.Ob(3),g.Zc("",t.ygen.formatTimestampToDate(t.subscription.lanunchdate)," "),g.Ob(3),g.Yc(g.vc(25,22,"Subscription End Date")),g.Ob(3),g.Zc("",t.ygen.formatTimestampToDate(t.subscription.subscriptiondate)," "),g.Ob(3),g.Yc(g.vc(31,24,"Current Subscription")),g.Ob(3),g.Zc("",t.ygen.getSubscriptionType()," "),g.Ob(4),g.Zc(" ",t.subscription.subscriptiondaysremaining," "),g.Ob(2),g.Yc(g.vc(40,26,"Days to Expiry")),g.Ob(2),g.Cc("ngIf",!t.subscription.issubscriptionon),g.Ob(1),g.Cc("ngIf",t.ygen.isSuperAdmin()||t.subscription.subscriptiondaysremaining<=14),g.Ob(4),g.Yc(g.vc(47,28,"Cancel")),g.Ob(2),g.Cc("ngIf",t.ygen.isSuperAdmin()),g.Ob(1),g.Cc("ngForOf",g.vc(50,30,t.renewlist)))},directives:[s.fb,s.j,s.L,s.f,s.g,s.db,s.s,h.a,h.f,h.c,h.h,h.d,n.m,h.b,b.a,s.qb,a.l,n.l,h.e,i.s,i.b,i.o,i.r],pipes:[l.c,n.b],styles:[".example-card[_ngcontent-%COMP%]{max-width:400px;margin:auto}.container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.containerb[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.item[_ngcontent-%COMP%]{font-size:15px}.ytext[_ngcontent-%COMP%]{font-weight:700}.counter[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:small}.ycricle[_ngcontent-%COMP%]{width:200px;height:200px;border-radius:50%;font-size:40px;line-height:200px;text-align:center;background:#000;color:#fff;margin:10px auto}.priceclass[_ngcontent-%COMP%]{width:46%;margin-right:5px;background:rgba(0,0,0,.17)}.md-padding[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myhead[_ngcontent-%COMP%]{font-size:20px;font-weight:700;margin-bottom:10px;text-align:center;padding:10px}.basic[_ngcontent-%COMP%], .myhead[_ngcontent-%COMP%]{background:rgba(0,255,255,.2)}.premimum[_ngcontent-%COMP%]{background:rgba(255,0,0,.32)}.premimumback[_ngcontent-%COMP%]{background:rgba(16,3,3,.17)}.basicback[_ngcontent-%COMP%]{background:rgba(0,0,2,.11)}.mat-card-footer[_ngcontent-%COMP%]{background:#ffb6c1}.dte[_ngcontent-%COMP%]{position:absolute;left:41%;top:42%;color:#7fffd4}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{opacity:1;font-size:xxx-large}"]}),c})()}];let w=(()=>{class c{}return c.\u0275mod=g.Zb({type:c}),c.\u0275inj=g.Yb({factory:function(t){return new(t||c)},imports:[[n.c,i.i,s.gb,r.J,r.o,r.b,a.n.forChild(O)]]}),c})()}}]);